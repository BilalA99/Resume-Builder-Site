<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>Select Template - Resume Builder</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
  <!-- Fonts style -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="css/style.css" rel="stylesheet" />
  <!-- Responsive style -->
  <link href="css/responsive.css" rel="stylesheet" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<body class="sub_page">

<!-- Header section starts -->
<header class="header_section">
  <div class="container-fluid">
    <nav class="navbar navbar-expand-lg custom_nav-container">
      <a class="navbar-brand" href="index.html">
        <img src="images/logo.png" alt="Resume Builder Logo">
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="create-resume.html">Create Resume</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="preview_templates.html">Preview Templates</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              More
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="about.html">About Us</a>
              <a class="dropdown-item" href="contact.html">Contact</a>
              <a class="dropdown-item" href="mortgage.html">Mortgage Calculator</a>
              <a class="dropdown-item" href="form-calculator.html">Service Calculator</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</header>
<!-- End header section -->

<!-- Resume Template Selection Section -->
<section class="template_section layout_padding">
  <div class="container">
    <div class="heading_container heading_center">
      <h2>Select Your <span>Resume Template</span></h2>
      <p>Choose a professional template that best represents your experience</p>
    </div>

    <!-- Progress Bar -->
    <div class="progress mb-4">
      <div class="progress-bar" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
    </div>

    <div class="template-grid">
      <!-- Template 1 -->
      <div class="template-card">
        <div class="template-preview">
          <img src="images/resume-preview.png" alt="Professional Template" class="img-fluid" onerror="this.src='images/resume-preview.png'">
          <div class="template-overlay">
            <button class="btn btn-light preview-btn" data-template="resume-template1">
              <i class="fas fa-eye"></i> Preview
            </button>
          </div>
        </div>
        <div class="template-info">
          <h3>Professional</h3>
          <p>Clean and modern design perfect for corporate roles</p>
          <div class="template-features">
            <span><i class="fas fa-check"></i> Modern Layout</span>
            <span><i class="fas fa-check"></i> Professional Style</span>
            <span><i class="fas fa-check"></i> Easy to Read</span>
          </div>
          <div class="template-radio">
            <input type="radio" name="resume_template" value="resume-template1" id="template1">
            <label for="template1">Select Template</label>
          </div>
        </div>
      </div>

      <!-- Template 2 -->
      <div class="template-card">
        <div class="template-preview">
          <img src="images/resume-preview.png" alt="Creative Template" class="img-fluid" onerror="this.src='images/resume-preview.png'">
          <div class="template-overlay">
            <button class="btn btn-light preview-btn" data-template="resume-template2">
              <i class="fas fa-eye"></i> Preview
            </button>
          </div>
        </div>
        <div class="template-info">
          <h3>Creative</h3>
          <p>Stand out with this unique and eye-catching design</p>
          <div class="template-features">
            <span><i class="fas fa-check"></i> Unique Design</span>
            <span><i class="fas fa-check"></i> Creative Layout</span>
            <span><i class="fas fa-check"></i> Visual Appeal</span>
          </div>
          <div class="template-radio">
            <input type="radio" name="resume_template" value="resume-template2" id="template2">
            <label for="template2">Select Template</label>
          </div>
        </div>
      </div>

      <!-- Template 3 -->
      <div class="template-card">
        <div class="template-preview">
          <img src="images/resume-preview.png" alt="Minimal Template" class="img-fluid" onerror="this.src='images/resume-preview.png'">
          <div class="template-overlay">
            <button class="btn btn-light preview-btn" data-template="resume-template3">
              <i class="fas fa-eye"></i> Preview
            </button>
          </div>
        </div>
        <div class="template-info">
          <h3>Minimal</h3>
          <p>Simple and elegant design for any industry</p>
          <div class="template-features">
            <span><i class="fas fa-check"></i> Clean Design</span>
            <span><i class="fas fa-check"></i> Easy to Scan</span>
            <span><i class="fas fa-check"></i> Versatile Style</span>
          </div>
          <div class="template-radio">
            <input type="radio" name="resume_template" value="resume-template3" id="template3">
            <label for="template3">Select Template</label>
          </div>
        </div>
      </div>
    </div>

    <div class="template-actions">
      <button type="button" class="btn btn-secondary" onclick="window.location.href='create-resume.html'">
        <i class="fas fa-arrow-left"></i> Back
      </button>
      <button onclick="applyTemplate()" class="btn btn-primary">
        Next: Preview & Download <i class="fas fa-arrow-right"></i>
      </button>
    </div>
  </div>
</section>

<!-- Template Preview Modal -->
<div class="modal fade" id="templatePreviewModal" tabindex="-1" role="dialog" aria-labelledby="templatePreviewModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="templatePreviewModalLabel">Template Preview</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="templatePreviewContent"></div>
      </div>
    </div>
  </div>
</div>

<!-- Footer Section -->
<footer class="footer_section">
  <div class="container">
    <p>&copy; <span id="displayYear"></span> Resume Builder. All Rights Reserved.</p>
  </div>
</footer>

<!-- jQuery -->
<script src="js/jquery-3.4.1.min.js"></script>
<!-- Bootstrap JS -->
<script src="js/bootstrap.js"></script>
<!-- Custom JS -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Load saved template if exists
    const savedTemplate = localStorage.getItem('selectedTemplate');
    if (savedTemplate) {
      const radio = document.querySelector(`input[value="${savedTemplate}"]`);
      if (radio) {
        radio.checked = true;
      }
    }

    // Preview button functionality
    const previewButtons = document.querySelectorAll('.preview-btn');
    previewButtons.forEach(button => {
      button.addEventListener('click', function(e) {
        e.preventDefault();
        const template = this.dataset.template;
        previewTemplate(template);
      });
    });

    // Add loading state to preview buttons
    previewButtons.forEach(button => {
      button.addEventListener('click', function() {
        const originalText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
        this.disabled = true;
        
        // Reset button after 3 seconds if preview fails
        setTimeout(() => {
          this.innerHTML = originalText;
          this.disabled = false;
        }, 3000);
      });
    });
  });

  function previewTemplate(template) {
    // Show loading state in modal
    const previewContent = document.getElementById('templatePreviewContent');
    previewContent.innerHTML = `
      <div class="text-center p-4">
        <i class="fas fa-spinner fa-spin fa-2x mb-3"></i>
        <p>Loading template preview...</p>
      </div>
    `;
    
    // Show the modal immediately
    $('#templatePreviewModal').modal('show');

    // Load the template content
    fetch(template + '.html')
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.text();
      })
      .then(html => {
        // Create a temporary container to parse the HTML
        const temp = document.createElement('div');
        temp.innerHTML = html;
        
        // Extract the main content (excluding header and footer)
        const mainContent = temp.querySelector('.resume-content');
        if (mainContent) {
          previewContent.innerHTML = mainContent.outerHTML;
        } else {
          previewContent.innerHTML = html;
        }
      })
      .catch(error => {
        console.error('Error loading template:', error);
        previewContent.innerHTML = `
          <div class="alert alert-danger m-3">
            <i class="fas fa-exclamation-circle"></i> Error loading template preview. Please try again.
          </div>
        `;
      });
  }

  function applyTemplate() {
    const selectedTemplate = document.querySelector('input[name="resume_template"]:checked');

    if (!selectedTemplate) {
      // Show error message
      const errorDiv = document.createElement('div');
      errorDiv.className = 'alert alert-danger mt-3';
      errorDiv.innerHTML = '<i class="fas fa-exclamation-circle"></i> Please select a template before proceeding.';
      
      const actionsDiv = document.querySelector('.template-actions');
      actionsDiv.insertBefore(errorDiv, actionsDiv.firstChild);
      
      // Remove error message after 3 seconds
      setTimeout(() => errorDiv.remove(), 3000);
      return;
    }

    // Store selected template in localStorage
    localStorage.setItem("selectedTemplate", selectedTemplate.value);

    // Redirect to preview page
    window.location.href = "preview_resume.html";
  }

  // Add error handling for missing images
  document.querySelectorAll('img').forEach(img => {
    img.addEventListener('error', function() {
      this.src = 'images/resume-preview.png';
    });
  });
</script>

<style>
.template-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
  margin: 40px 0;
}

.template-card {
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(0,0,0,0.1);
  overflow: hidden;
  transition: transform 0.3s ease;
}

.template-card:hover {
  transform: translateY(-5px);
}

.template-preview {
  position: relative;
  overflow: hidden;
}

.template-preview img {
  width: 100%;
  height: auto;
  transition: transform 0.3s ease;
}

.template-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.template-preview:hover .template-overlay {
  opacity: 1;
}

.template-info {
  padding: 20px;
}

.template-info h3 {
  color: #00c6a9;
  margin-bottom: 10px;
}

.template-info p {
  color: #666;
  margin-bottom: 15px;
}

.template-features {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 20px;
}

.template-features span {
  background: #f8f9fa;
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 0.9rem;
  color: #666;
}

.template-features i {
  color: #00c6a9;
  margin-right: 5px;
}

.template-radio {
  text-align: center;
}

.template-radio input[type="radio"] {
  display: none;
}

.template-radio label {
  display: inline-block;
  padding: 8px 20px;
  background: #f8f9fa;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.template-radio input[type="radio"]:checked + label {
  background: #00c6a9;
  color: white;
}

.template-actions {
  display: flex;
  justify-content: space-between;
  margin-top: 40px;
}

.btn {
  padding: 10px 25px;
  border-radius: 5px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.btn-primary {
  background-color: #00c6a9;
  border-color: #00c6a9;
}

.btn-primary:hover {
  background-color: #00937d;
  border-color: #00937d;
}

.progress {
  height: 10px;
  border-radius: 5px;
  background-color: #e9ecef;
}

.progress-bar {
  background-color: #00c6a9;
  transition: width 0.3s ease;
}

@media (max-width: 768px) {
  .template-grid {
    grid-template-columns: 1fr;
  }
  
  .template-actions {
    flex-direction: column;
    gap: 15px;
  }
  
  .btn {
    width: 100%;
  }
}

/* Add loading animation styles */
.fa-spinner {
  color: #00c6a9;
}

/* Improve modal styles */
.modal-content {
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(0,0,0,0.1);
}

.modal-header {
  background-color: #f8f9fa;
  border-bottom: 1px solid #dee2e6;
  border-radius: 10px 10px 0 0;
}

.modal-title {
  color: #00c6a9;
  font-weight: 500;
}

.modal-body {
  padding: 20px;
  max-height: 70vh;
  overflow-y: auto;
}

/* Improve button states */
.btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

/* Add smooth transitions */
.modal.fade .modal-dialog {
  transition: transform 0.3s ease-out;
}

.modal.show .modal-dialog {
  transform: none;
}

/* Improve error message styling */
.alert-danger {
  background-color: #fff5f5;
  border-color: #feb2b2;
  color: #c53030;
}

.alert-danger i {
  margin-right: 8px;
}

/* Add styles for template preview content */
#templatePreviewContent {
  background: white;
  padding: 20px;
  border-radius: 5px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

#templatePreviewContent .resume-content {
  max-width: 800px;
  margin: 0 auto;
}

/* Improve modal styles for better preview */
.modal-dialog.modal-lg {
  max-width: 900px;
}

.modal-body {
  padding: 20px;
  max-height: 80vh;
  overflow-y: auto;
  background: #f8f9fa;
}

/* Add print styles for preview */
@media print {
  .modal-header,
  .modal-footer,
  .btn-close {
    display: none !important;
  }
  
  .modal-body {
    padding: 0;
    max-height: none;
    overflow: visible;
  }
  
  #templatePreviewContent {
    box-shadow: none;
  }
}
</style>

</body>

</html> 